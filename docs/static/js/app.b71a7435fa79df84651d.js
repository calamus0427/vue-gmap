webpackJsonp([1],{NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("7+uW"),a={name:"App",mounted:function(){console.log("%c【calamus】   kiz.calamus@gmail.com\n%cwww.calamus.xyz \nwww.github.com/calamus0427 ","color:#E1244E;font-size:16px;","color:#9e9e9e;font-size:14px")}},i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var l=n("VU/8")(a,i,!1,function(e){n("k/rE")},null,null).exports,r=n("/ocq"),s=n("bOdI"),c=n.n(s),p=n("/IwO"),u=n.n(p),d=new u.a.AMapManager,m={name:"GMap",props:{vid:{type:String,default:"amap-demo"},flex:{type:Number,default:0},center:{type:Array,default:function(){return[121.59996,31.197646]}},zoom:{type:Number,default:16},rotateEnable:{type:Boolean,default:!0},resizeEnable:{type:Boolean,default:!0},mapStyle:{type:String,default:"normal"},chooseArea:{type:Boolean,default:!0}},data:function(){var e=this,t=this;return{amapManager:d,map:null,AMap:null,geocoder:null,ruler:null,mouseTool:null,mPolygon:null,flagBit:!1,renderFenceOk:!1,fenceArr:[],mapCenter:[],svgChoose:"",chooseVisible:!1,bubble:!0,clickable:!0,minHeight:300,loaded:!1,markers:[],inputSearch:"",ellipse:{},rectangle:{},searchOption:{city:"西安",citylimit:!1},currentAddress:"",currentPosition:[],events:{init:function(e){var n=document.getElementById("addmPolygon"),o=document.getElementById("clearPolygon");t.mouseTool=new AMap.MouseTool(e),AMap.event.addDomListener(n,"click",function(e){t.mouseTool.measureArea(),t.flagBit=!0},!1),AMap.event.addDomListener(o,"click",function(){t.mouseTool.close(!0),t.flagBit=!1},!1),t.mouseTool.on("draw",function(e){t.flagBit=!1,t.mouseTool.close(!1);e.obj.getPath().map(function(e){return[e.lng,e.lat]})}),e.getCity(function(e){console.log(" map init success ",e)});var a=document.getElementById("measureLine"),i=document.getElementById("measureLineDel");t.ruler=new AMap.RangingTool(e);new AMap.Icon({size:new AMap.Size(19,31),image:"https://webapi.amap.com/theme/v1.3/markers/n/mark_b1.png"}),new AMap.Icon({size:new AMap.Size(19,31),image:"https://webapi.amap.com/theme/v1.3/markers/n/mark_b2.png"}),new AMap.Pixel(-9,-31);AMap.event.addDomListener(a,"click",function(e){t.ruler.turnOn(),t.flagBit=!0},!1),AMap.event.addListener(t.ruler,"end",function(e){t.ruler.turnOff(!1),t.flagBit=!1}),AMap.event.addDomListener(i,"click",function(){t.ruler.turnOff(!0),t.flagBit=!1},!1)},moveend:function(){},zoomchange:function(){},click:function(n){if(!e.flagBit){e.chooseVisible=!0;var o=n.lnglat,a=o.lng,i=o.lat;e.mapCenter=[a,i],e.getAddress([a,i]);t.getAddress([a,i])}}},plugin:["AMap.RangingTool","ToolBar","MapType","Scale","AMap.EllipseEditor","AMap.RectangleEditor","AMap.PolyEditor","AMap.MouseTool"],circle:{editable:!1,visible:!1,center:[121.5273285,31.21515044],radius:1e3,fillOpacity:.5,events:{click:function(){console.log("click circle")}}},polygon:{id:"1",visible:!1,editable:!1,draggable:!0,path:[],events:{click:function(){console.log("click polygon")}}}}},created:function(){this.AMap=window.AMap},mounted:function(){this.initMap()},computed:{flexHeight:function(){return(document.documentElement.clientHeight-this.flex>this.minHeight?document.documentElement.clientHeight-this.flex:this.minHeight)+"px"}},watch:{svgChoose:function(e,t){e}},methods:{initMap:function(){var e=this;p.lazyAMapApiLoaderInstance.load().then(function(){e.map=new AMap.Map("amapContainer",{center:new AMap.LngLat(e.center[0],e.center[1])}),e.geocoder=new AMap.Geocoder({radius:1e3,extensions:"all"}),e.getAddress([121.59996,31.197646]),e.getLocation("上海市")}),this.mapCenter=this.center},getAddress:function(e){var t=this;return this.geocoder.getAddress(e,function(n,o){"complete"===n&&"OK"===o.info&&o&&o.regeocode&&(t.currentAddress=o.regeocode.formattedAddress,t.$emit("click",{lat:e[0],lng:e[1],address:t.currentAddress}),t.$nextTick())}),this.currentAddress},getLocation:function(e){var t=this;return this.geocoder.getLocation(e,function(e,n){if("complete"===e&&"OK"===n.info){var o=n.geocodes[0].location,a=o.lng,i=o.lat;t.currentPosition=[a,i]}}),this.currentPosition},addMarker:function(){var e=121.5+Math.round(1e3*Math.random())/1e4,t=31.197646+Math.round(500*Math.random())/1e4;this.markers.push([e,t])},onSearchResult:function(e){var t=this,n=0,o=0;if(e.length>0){e.forEach(function(e){var a=e.lng,i=e.lat,l=e.address;o+=a,n+=i,t.markers.push({poi:[e.lng,e.lat],address:l})});var a={lng:o/e.length,lat:n/e.length};this.mapCenter=[a.lng,a.lat]}},markerClick:function(e){console.log("markerClick",e)},changeSvg:function(e){console.log(e)},addCircle:function(){this.circle.visible=!0},editCircle:function(){this.circle.editable=!0},exitCircle:function(){this.circle.editable=!1},removeCircle:function(){this.circle.editable=!1,this.circle.visible=!1},addEllipse:function(){this.ellipse=new AMap.Ellipse(c()({map:this.map,center:this.mapCenter,radius:[4e3,6e3],strokeColor:"red",strokeWeight:10,strokeOpacity:.5,strokeDasharray:[30,10],strokeStyle:"dashed",fillColor:"blue",fillOpacity:.5,zIndex:10,bubble:!0,cursor:"pointer"},"bubble",!1)),this.ellipse.setMap(this.map)},editEllipse:function(){return new AMap.EllipseEditor(this.map,this.ellipse).open()},exitEllipse:function(){return new AMap.EllipseEditor(this.map,this.ellipse).close()},addPolygon:function(){this.mapCenter;var e=[this.mapCenter[0],this.mapCenter[1]],t=[this.mapCenter[0]+.002,this.mapCenter[1]],n=[this.mapCenter[0]+.002,this.mapCenter[1]+.002],o=[this.mapCenter[0],this.mapCenter[1]+.002];this.polygon.path=[e,t,n,o,e],this.polygon.visible=!0},editPolygon:function(){this.polygon.editable=!0},exitPolygon:function(){this.polygon.editable=!1},removePolygon:function(){this.polygon.editable=!1,this.polygon.visible=!1}}},g={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"amap-container",style:{height:e.flexHeight}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.chooseArea,expression:"chooseArea"}],staticClass:"svgBtn"},[n("el-select",{attrs:{placeholder:"请选择选择区域"},on:{change:e.changeSvg},model:{value:e.svgChoose,callback:function(t){e.svgChoose=t},expression:"svgChoose"}},[n("el-option",{attrs:{label:"圆",value:"1"}}),e._v(" "),n("el-option",{attrs:{label:"折线",value:"2"}}),e._v(" "),n("el-option",{attrs:{label:"多边形",value:"5"}}),e._v(" "),n("el-option",{attrs:{label:"自定义多边形",value:"6"}})],1),e._v(" "),n("el-button-group",{directives:[{name:"show",rawName:"v-show",value:1==e.svgChoose,expression:"svgChoose == 1"}]},[n("el-button",{on:{click:e.addCircle}},[e._v("添加圆")]),e._v(" "),n("el-button",{on:{click:e.editCircle}},[e._v("编辑圆")]),e._v(" "),n("el-button",{on:{click:e.exitCircle}},[e._v("结束编辑圆")]),e._v(" "),n("el-button",{on:{click:e.removeCircle}},[e._v("del circle")])],1),e._v(" "),n("el-button-group",{directives:[{name:"show",rawName:"v-show",value:5==e.svgChoose,expression:"svgChoose == 5"}]},[n("el-button",{on:{click:e.addPolygon}},[e._v("添加多边形")]),e._v(" "),n("el-button",{on:{click:e.editPolygon}},[e._v("编辑多边形")]),e._v(" "),n("el-button",{on:{click:e.exitPolygon}},[e._v("结束编辑多边形")]),e._v(" "),n("el-button",{on:{click:e.removePolygon}},[e._v("del多边形")])],1),e._v(" "),n("el-button-group",{directives:[{name:"show",rawName:"v-show",value:6==e.svgChoose,expression:"svgChoose == 6"}]},[n("el-button",{attrs:{id:"addmPolygon"}},[e._v("添加自定义多边形")]),e._v(" "),n("el-button",{attrs:{id:"clearPolygon"}},[e._v("删除多边形")])],1),e._v(" "),n("el-button-group",{directives:[{name:"show",rawName:"v-show",value:2==e.svgChoose,expression:"svgChoose == 2"}]},[n("el-button",{attrs:{id:"measureLine"}},[e._v("两点测距离")]),e._v(" "),n("el-button",{attrs:{id:"measureLineDel"}},[e._v("删除直线")])],1)],1),e._v(" "),n("el-amap-search-box",{staticClass:"search-box",attrs:{"search-option":e.searchOption,"on-search-result":e.onSearchResult},model:{value:e.inputSearch,callback:function(t){e.inputSearch=t},expression:"inputSearch"}}),e._v(" "),n("el-amap",{attrs:{vid:e.vid,center:e.mapCenter,zoom:e.zoom,rotateEnable:e.rotateEnable,resizeEnable:e.resizeEnable,mapStyle:e.mapStyle,"amap-manager":e.amapManager,plugin:e.plugin,events:e.events}},[n("el-amap-marker",{staticClass:"aaaaa",attrs:{zIndex:"2000",icon:"http://pevw4ryx8.bkt.clouddn.com/default_2x-fs.png",clickable:e.clickable,position:e.mapCenter},on:{click:function(t){return t.stopPropagation(),e.markerClick(t)}}}),e._v(" "),e._l(e.markers,function(t,o){return n("el-amap-marker",{key:o,attrs:{cursor:"pointer",bubble:e.bubble,clickable:e.clickable,position:t.poi,title:t.address},on:{click:function(t){return t.stopPropagation(),e.markerClick(t)}}})}),e._v(" "),n("el-amap-circle",{attrs:{visible:e.circle.visible,editable:e.circle.editable,center:e.mapCenter,radius:e.circle.radius,"fill-opacity":e.circle.fillOpacity,events:e.circle.events}}),e._v(" "),n("el-amap-polygon",{attrs:{visible:e.polygon.visible,editable:e.polygon.editable,vid:e.polygon.id,path:e.polygon.path,draggable:e.polygon.draggable,events:e.polygon.events}})],2)],1)},staticRenderFns:[]};var h={name:"demo3D",components:{GMap:n("VU/8")(m,g,!1,function(e){n("c6Jh")},"data-v-2f584b34",null).exports},data:function(){return{vid:"amap-vue",poi:{lat:"",lng:""},address:""}},mounted:function(){},methods:{choose:function(e){this.poi.lat=e.lat,this.poi.lng=e.lng,this.address=e.address}}},v={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[e._v("当前点击位置："+e._s(e.poi.lat)+","+e._s(e.poi.lng)+",城市为: "+e._s(e.address))]),e._v(" "),n("g-map",{attrs:{vid:e.vid},on:{click:e.choose}})],1)},staticRenderFns:[]};var f=n("VU/8")(h,v,!1,function(e){n("nZHr")},"data-v-32c84186",null).exports;o.default.use(r.a);var b=new r.a({routes:[{path:"/",name:"GMap",component:f}]}),y=n("zL8q"),A=n.n(y);n("tvR6");o.default.config.productionTip=!1,o.default.use(u.a),o.default.use(A.a),u.a.initAMapApiLoader({key:"8703164b6d9a53e64195238e3e17b1f3",plugin:["AMap.RangingTool","AMap.MouseTool","AMap.PolyEditor","AMap.CircleEditor","AMap.Autocomplete","AMap.EllipseEditor","AMap.RectangleEditor","AMap.PlaceSearch","AMap.Scale","AMap.OverView","AMap.ToolBar","AMap.MapType","AMap.PolyEditor","AMap.CircleEditor","AMap.Geocoder","Geolocation"],uiVersion:"1.0"}),new o.default({el:"#app",router:b,components:{App:l},template:"<App/>"})},c6Jh:function(e,t){},"k/rE":function(e,t){},nZHr:function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.b71a7435fa79df84651d.js.map